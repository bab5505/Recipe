{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
  <h1>Welcome to the Recipe Collection App</h1>
  <h1>Recipes</h1>
  <ul>
    {% for recipe in recipes %}
    <li>
      <div>
        <h2>{{ recipe.title }}</h2>
        <p>{{ recipe.description }}</p>
        <a href="{{ url_for('view_recipe', recipe_id=recipe.id) }}" class="btn btn-primary">View Recipe</a>
        <!-- Additional recipe details -->
      </div>
    </li>
    {% endfor %}
  </ul>

  <section id="search-section">
    <h2>Search for Recipes</h2>
    <input type="text" id="search-input" placeholder="Enter keywords">
    <button id="search-button">Search</button>
  </section>

  <section id="recipes-section">
    <div id="recipes-container">
      {% for recipe in recipes %}
        <div>
          <h2>{{ recipe.title }}</h2>
          <p>{{ recipe.description }}</p>
          <a href="{{ url_for('view_recipe', recipe_id=recipe.id) }}" class="btn btn-primary">View Recipe</a>
          <!-- Additional recipe details -->
        </div>
      {% endfor %}
    </div>
  </section>

  <section id="add-recipe-section">
    <a href="{{ url_for('add_recipe') }}" class="add-recipe-button">Add Recipe</a>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var searchButton = document.getElementById('search-button');
      var searchInput = document.getElementById('search-input');
      var recipesContainer = document.getElementById('recipes-container');
  
      // Function to retrieve stored recipes
      function getStoredRecipes() {
        // Replace this with your logic to retrieve the stored recipes
        var storedRecipes = [
          { title: 'Stored Recipe 1', description: 'Stored Description 1' },
          { title: 'Stored Recipe 2', description: 'Stored Description 2' },
          // Add more stored recipes as needed
        ];
        return storedRecipes;
      }
  
      // Function to render recipes on the page
      function renderRecipes(recipes) {
        recipesContainer.innerHTML = ''; // Clear previous recipes
  
        recipes.forEach(function(recipe) {
          var recipeElement = document.createElement('div');
          var titleElement = document.createElement('h2');
          titleElement.textContent = recipe.title;
          var descriptionElement = document.createElement('p');
          descriptionElement.textContent = recipe.description;
          recipeElement.appendChild(titleElement);
          recipeElement.appendChild(descriptionElement);
          recipesContainer.appendChild(recipeElement);
        });
      }
  
      // Display stored recipes on page load
      var storedRecipes = getStoredRecipes();
      renderRecipes(storedRecipes);
  
      searchButton.addEventListener('click', function() {
        var query = searchInput.value;
  
        // Perform the necessary action with the search query
        // Example: Make an API call to retrieve recipes based on the search query
  
        // Update the recipesContainer with the retrieved recipes
        // Example: Replace this with your logic to retrieve search results
        var searchResults = [
          { title: 'Search Result 1', description: 'Search Description 1' },
          { title: 'Search Result 2', description: 'Search Description 2' },
          // Add more search results as needed
        ];
  
        renderRecipes(searchResults);
  
        // For demonstration purposes, let's log the search query to the console
        console.log('Search Query:', query);
      });
    });
  </script>
  
{% endblock %}
